<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin Upload Panel</title>
  <style>
    body { background:#111; color:#fff; font-family:Arial; padding:20px; }
    input,button { padding:10px; margin:5px 0; width:100%; border-radius:5px; border:none; }
    button{ background:#ff004c; color:white; font-weight:bold; cursor:pointer;}
    button:hover{ opacity:.8; }
    .box{ max-width:450px; margin:auto; background:#222; padding:20px; border-radius:8px; }
  </style>
</head>
<body>

<div class="box">
  <h2>üöÄ Admin Upload Panel</h2>

  <input type="file" id="fileInput">
  <input type="text" id="fileName" placeholder="filename.jpg">
  <input type="text" id="tags" placeholder="Tags (anime,boy,dark)">
  <button id="uploadBtn">Upload</button>

  <p id="status"></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// ---------- SUPABASE CONFIG ----------
const SUPABASE_URL = "https://uekehssbugjcdjopietz.supabase.co";
const SUPABASE_KEY = "sb_publishable_DhiBec9_K-jgfAuaXLOIJw_7TKC7BBU";
const bucketName = "images";  // bucket you created

const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);


// ---------- HANDLE UPLOAD ----------
document.getElementById("uploadBtn").onclick = async () => {
    const file = document.getElementById("fileInput").files[0];
    const name = document.getElementById("fileName").value.trim();
    const tags = document.getElementById("tags").value.split(",").map(t=>t.trim());
    const status = document.getElementById("status");

    if(!file || !name){ 
        status.innerHTML="‚ùå File name required"; 
        return;
    }

    status.innerHTML="Uploading... ‚è≥";

    // 1Ô∏è‚É£ Upload to bucket
    let { error: uploadError } = await supabase.storage
      .from(bucketName)
      .upload(name, file, { upsert:true });

    if(uploadError){
        status.innerHTML="Upload failed ‚ùå";
        return;
    }

    // 2Ô∏è‚É£ Insert into DB
    await supabase.from("images").insert({
        file: name,
        tags: tags
    });

    status.innerHTML="‚úÖ Uploaded Successfully!";
};
</script>

</body>
</html>
