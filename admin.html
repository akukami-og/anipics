<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
    body{background:#000;color:#fff;font-family:poppins;text-align:center}
    .box{margin-top:50px;width:90%;max-width:400px;margin:auto}
    input,select,button{
        width:100%;padding:10px;margin-top:10px;border:none;
        border-radius:5px;font-size:16px
    }
    button{background:#ff0044;color:#fff;cursor:pointer}
</style>
</head>
<body>

<h2>Admin Upload</h2>
<p>Enter password to continue</p>

<input type="password" id="pass" placeholder="Enter Admin Password">
<button onclick="login()">Login</button>

<div id="panel" style="display:none" class="box">
    <h3>Upload Image</h3>

    <input type="file" id="imageFile" accept="image/*">

    <label style="float:left;margin-top:20px">Select Tags:</label>
    <select id="tags" multiple size="6">
        <option value="animeboy">Anime Boy</option>
        <option value="animegirl">Anime Girl</option>
        <option value="sad">Sad</option>
        <option value="alone">Alone</option>
        <option value="dark">Dark</option>
        <option value="happy">Happy</option>
    </select>

    <button onclick="uploadImage()">Upload</button>
</div>

<script>
const supabaseUrl = "YOUR_URL";
const supabaseKey = "YOUR_KEY"; 
const supabase = supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

// LOGIN
function login(){
    if(document.getElementById("pass").value==="AKUMA123"){ 
        document.getElementById("panel").style.display="block";
    }else{
        alert("Wrong password");
    }
}

// UPLOAD IMAGE
async function uploadImage(){
    const fileInput=document.getElementById("imageFile").files[0];
    const tags=[...document.getElementById("tags").selectedOptions].map(o=>o.value);

    if(!fileInput) return alert("Select an image first");

    const fileName=Date.now()+"_"+fileInput.name;

    // upload to storage (or later add bucket)
    const { data,error }=await supabase.storage.from("images").upload(fileName,fileInput);

    if(error) return alert("Upload error: "+error.message);

    await supabase.from("images").insert({file:fileName,tags});

    alert("Uploaded Successfully ðŸŽ‰");
}
</script>
</body>
</html>
